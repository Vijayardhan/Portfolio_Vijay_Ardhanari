<link rel="stylesheet" href="{{ url_for('static', filename='css/contact.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='mq/mq-contact.css') }}">

<section id="Contact">
    <div class="custom-container">
        <h2>Send me a message</h2>
        <form id="custom-contact-form">
            <div class="custom-form-group">
                <label for="name">Name *</label>
                <input type="text" id="name" name="from_name" required>
            </div>
            <div class="custom-form-group">
                <label for="email">Email ID *</label>
                <input type="email" id="email" name="reply_to" required>
            </div>
            <div class="custom-form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone_number">
            </div>
            <div class="custom-form-group">
                <label for="place">Place *</label>
                <input type="text" id="place" name="place" required>
            </div>
            <div class="custom-form-group">
                <label for="message">Message *</label>
                <textarea id="message" name="message" rows="4" required></textarea>
            </div>
            <div class="custom-cont">
                <button type="submit">
                    <span>Send Message</span>
                    <img src="https://img.icons8.com/ios-filled/50/ffffff/checkmark.png" alt="tick" width="30px" height="30px">
                </button>
            </div>
        </form>
    </div>
</section>

<footer>
    <p>&copy; 2024 Vijay A</p>
</footer>

<!-- EmailJS & SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    (function () {
        emailjs.init("Xux9SbuMW5nrzVT9r");
    })();

    window.onload = function () {
        const contactForm = document.getElementById('custom-contact-form');
        const contactSection = document.getElementById('Contact');
        const sendButton = document.querySelector('.custom-cont button');
        const buttonSpan = sendButton.querySelector('span');
        const buttonImage = sendButton.querySelector('img');

        contactForm.addEventListener('submit', function (event) {
            event.preventDefault();
            sendButton.classList.add('sent');
            document.body.style.overflow = 'hidden';

            emailjs.sendForm('service_5txt3hb', 'template_1wep6tj', this)
                .then(() => {
                    Swal.fire({
                        title: 'Success!',
                        text: 'Your message has been sent successfully.',
                        icon: 'success',
                        confirmButtonText: 'OK',
                        willClose: () => {
                            document.body.style.overflow = 'auto';
                            contactSection.scrollIntoView({ behavior: 'smooth' });
                            contactForm.reset();
                            sendButton.classList.remove('sent');
                        }
                    });
                }, (error) => {
                    Swal.fire({
                        title: 'Error!',
                        text: 'There was a problem sending your message. Please try again.',
                        icon: 'error',
                        confirmButtonText: 'OK',
                        willClose: () => {
                            document.body.style.overflow = 'auto';
                            contactSection.scrollIntoView({ behavior: 'smooth' });
                            sendButton.classList.remove('sent');
                        }
                    });
                    console.error('EmailJS Error:', error);
                });
        });
    };
</script>
<script src="{{ url_for('static', filename='js/contact.js') }}"></script>